{"ast":null,"code":"import _objectSpread from\"D:/progects/SoftArex/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import api from'../api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function LoginPage(){const[form,setForm]=useState({email:'',password:'',rememberMe:false});const[message,setMessage]=useState('');const[messageType,setMessageType]=useState('');const handleChange=e=>{const{name,value,type,checked}=e.target;setForm(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:type==='checkbox'?checked:value}));};const handleSubmit=async e=>{e.preventDefault();setMessage('');setMessageType('');try{const response=await api.post('/oauth/sign-in',{email:form.email,password:form.password});const accessToken=response.data.accessToken;const refreshToken=response.data.refreshToken;if(form.rememberMe){sessionStorage.setItem('accessToken',accessToken);localStorage.setItem('refreshToken',refreshToken);}else{sessionStorage.setItem('accessToken',accessToken);}window.location.href='/';}catch(error){var _error$response,_error$response2,_error$response2$data;const status=error===null||error===void 0?void 0:(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status;const errMsg=(error===null||error===void 0?void 0:(_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||'–û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏';if(status===401){setMessage(errMsg);setMessageType('error');}else{setMessage('–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞');setMessageType('error');}}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"style\",{children:\"\\n        body {\\n          background-color: #f8f9fa;\\n        }\\n        .login-container {\\n          max-width: 400px;\\n          margin: 100px auto;\\n          padding: 30px;\\n          background-color: white;\\n          border-radius: 10px;\\n          box-shadow: 0 0 10px rgba(0,0,0,0.1);\\n        }\\n        .logotype {\\n          font-weight: bold;\\n        }\\n        .logotype span {\\n          color: #0d6efd;\\n        }\\n      \"}),/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-container\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-center logotype\",children:[\"LOGO\",/*#__PURE__*/_jsx(\"span\",{children:\"TYPE\"})]}),/*#__PURE__*/_jsx(\"h5\",{className:\"text-center mb-4\",children:\"Log In\"}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"alert \".concat(messageType==='success'?'alert-success':'alert-danger'),role:\"alert\",children:message}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",className:\"form-control\",placeholder:\"Email\",value:form.email,onChange:handleChange,required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",className:\"form-control\",placeholder:\"Password\",value:form.password,onChange:handleChange,required:true})}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-check\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",className:\"form-check-input\",id:\"remember\",name:\"rememberMe\",checked:form.rememberMe,onChange:handleChange}),/*#__PURE__*/_jsx(\"label\",{className:\"form-check-label\",htmlFor:\"remember\",children:\"Remember me\"})]}),/*#__PURE__*/_jsx(\"a\",{href:\"/change-password\",className:\"text-decoration-none\",children:\"Forgot password?\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"d-grid\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"LOG IN\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mt-3\",children:[\"Don't have an account? \",/*#__PURE__*/_jsx(\"a\",{href:\"/signup\",className:\"text-decoration-none text-primary\",children:\"Sign Up\"})]})]})})]});}","map":{"version":3,"names":["React","useState","api","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","LoginPage","form","setForm","email","password","rememberMe","message","setMessage","messageType","setMessageType","handleChange","e","name","value","type","checked","target","prev","_objectSpread","handleSubmit","preventDefault","response","post","accessToken","data","refreshToken","sessionStorage","setItem","localStorage","window","location","href","error","_error$response","_error$response2","_error$response2$data","status","errMsg","children","className","concat","role","onSubmit","placeholder","onChange","required","id","htmlFor"],"sources":["D:/progects/SoftArex/FrontEnd/src/pages/LoginPage.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport api from '../api';\r\n\r\nexport default function LoginPage() {\r\n    const [form, setForm] = useState({\r\n        email: '',\r\n        password: '',\r\n        rememberMe: false,\r\n    });\r\n\r\n    const [message, setMessage] = useState('');\r\n    const [messageType, setMessageType] = useState('');\r\n\r\n    const handleChange = (e) => {\r\n        const { name, value, type, checked } = e.target;\r\n        setForm((prev) => ({\r\n            ...prev,\r\n            [name]: type === 'checkbox' ? checked : value,\r\n        }));\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setMessage('');\r\n        setMessageType('');\r\n\r\n        try {\r\n            const response = await api.post('/oauth/sign-in', {\r\n                email: form.email,\r\n                password: form.password,\r\n            });\r\n\r\n            const accessToken = response.data.accessToken;\r\n            const refreshToken = response.data.refreshToken;\r\n\r\n            if (form.rememberMe) {\r\n                sessionStorage.setItem('accessToken', accessToken);\r\n                localStorage.setItem('refreshToken', refreshToken);\r\n            } else {\r\n                sessionStorage.setItem('accessToken', accessToken);\r\n            }\r\n\r\n\r\n\r\n\r\n\r\n                window.location.href = '/';\r\n\r\n        } catch (error) {\r\n            const status = error?.response?.status;\r\n            const errMsg = error?.response?.data?.message || '–û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏';\r\n\r\n            if (status === 401) {\r\n                setMessage(errMsg);\r\n                setMessageType('error');\r\n            } else {\r\n                setMessage('–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞');\r\n                setMessageType('error');\r\n            }\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <style>{`\r\n        body {\r\n          background-color: #f8f9fa;\r\n        }\r\n        .login-container {\r\n          max-width: 400px;\r\n          margin: 100px auto;\r\n          padding: 30px;\r\n          background-color: white;\r\n          border-radius: 10px;\r\n          box-shadow: 0 0 10px rgba(0,0,0,0.1);\r\n        }\r\n        .logotype {\r\n          font-weight: bold;\r\n        }\r\n        .logotype span {\r\n          color: #0d6efd;\r\n        }\r\n      `}</style>\r\n\r\n            <div className=\"container\">\r\n                <div className=\"login-container\">\r\n                    <h2 className=\"text-center logotype\">LOGO<span>TYPE</span></h2>\r\n                    <h5 className=\"text-center mb-4\">Log In</h5>\r\n\r\n                    {/* üîî –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ */}\r\n                    {message && (\r\n                        <div className={`alert ${messageType === 'success' ? 'alert-success' : 'alert-danger'}`} role=\"alert\">\r\n                            {message}\r\n                        </div>\r\n                    )}\r\n\r\n                    <form onSubmit={handleSubmit}>\r\n                        <div className=\"mb-3\">\r\n                            <input\r\n                                type=\"email\"\r\n                                name=\"email\"\r\n                                className=\"form-control\"\r\n                                placeholder=\"Email\"\r\n                                value={form.email}\r\n                                onChange={handleChange}\r\n                                required\r\n                            />\r\n                        </div>\r\n                        <div className=\"mb-3\">\r\n                            <input\r\n                                type=\"password\"\r\n                                name=\"password\"\r\n                                className=\"form-control\"\r\n                                placeholder=\"Password\"\r\n                                value={form.password}\r\n                                onChange={handleChange}\r\n                                required\r\n                            />\r\n                        </div>\r\n                        <div className=\"d-flex justify-content-between align-items-center mb-3\">\r\n                            <div className=\"form-check\">\r\n                                <input\r\n                                    type=\"checkbox\"\r\n                                    className=\"form-check-input\"\r\n                                    id=\"remember\"\r\n                                    name=\"rememberMe\"\r\n                                    checked={form.rememberMe}\r\n                                    onChange={handleChange}\r\n                                />\r\n                                <label className=\"form-check-label\" htmlFor=\"remember\">Remember me</label>\r\n                            </div>\r\n                            <a href=\"/change-password\" className=\"text-decoration-none\">Forgot password?</a>\r\n                        </div>\r\n                        <div className=\"d-grid\">\r\n                            <button type=\"submit\" className=\"btn btn-primary\">LOG IN</button>\r\n                        </div>\r\n                    </form>\r\n                    <div className=\"text-center mt-3\">\r\n                        Don't have an account? <a href=\"/signup\" className=\"text-decoration-none text-primary\">Sign Up</a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}