{"ast":null,"code":"import React,{useEffect,useState}from'react';import api from'../api';import Navbar from\"../utils/Navbar\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function ResetPasswordPage(){const[code,setCode]=useState('');const[error,setError]=useState('');const[successMsg,setSuccessMsg]=useState('');const[form,setForm]=useState({email:'',password:'',confirmPassword:'',firstName:'',lastName:'',phone:''});useEffect(()=>{const stored=sessionStorage.getItem(\"signupForm\");if(stored){const formData=JSON.parse(stored);setForm(formData);sessionStorage.removeItem(\"signupForm\");}},[]);const handleVerifyCode=async e=>{e.preventDefault();if(!code)return setError('–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥');try{await axios.post('http://localhost:8080/password/verify-code',{email:form.email,code});setError('');setSuccessMsg('–ü–æ—á—Ç–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞');const response=await api.post('/oauth/sign-up',form);const accessToken=response.data.accessToken;sessionStorage.setItem('accessToken',accessToken);setTimeout(()=>window.location.href='/',2000);}catch(err){setError('–ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥.');}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"container mt-5\",style:{maxWidth:400},children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-4 rounded shadow\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-center mb-3\",children:\"\\uD83D\\uDD10 \\u041F\\u043E\\u0434\\u0442\\u0432\\u0435\\u0440\\u0436\\u0434\\u0435\\u043D\\u0438\\u0435 \\u043F\\u043E\\u0447\\u0442\\u044B\"}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-between mb-3\",children:/*#__PURE__*/_jsx(\"span\",{className:'fw-bold text-primary',children:\"\\u041D\\u0430 \\u0432\\u0430\\u0448\\u0443 \\u043F\\u043E\\u0447\\u0442\\u0443 \\u0431\\u044B\\u043B \\u0432\\u044B\\u0441\\u043B\\u0430\\u043D \\u043A\\u043E\\u0434\"})}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger py-1\",children:error}),successMsg&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-success py-1\",children:successMsg}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleVerifyCode,children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043A\\u043E\\u0434 \\u0438\\u0437 \\u043F\\u0438\\u0441\\u044C\\u043C\\u0430\",value:code,onChange:e=>setCode(e.target.value),required:true})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary w-100\",type:\"submit\",children:\"\\u041F\\u043E\\u0434\\u0442\\u0432\\u0435\\u0440\\u0434\\u0438\\u0442\\u044C \\u043A\\u043E\\u0434\"})]})]})})});}","map":{"version":3,"names":["React","useEffect","useState","api","Navbar","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ResetPasswordPage","code","setCode","error","setError","successMsg","setSuccessMsg","form","setForm","email","password","confirmPassword","firstName","lastName","phone","stored","sessionStorage","getItem","formData","JSON","parse","removeItem","handleVerifyCode","e","preventDefault","post","response","accessToken","data","setItem","setTimeout","window","location","href","err","children","className","style","maxWidth","onSubmit","type","placeholder","value","onChange","target","required"],"sources":["D:/progects/SoftArex/frontend/src/pages/VerifyEmailPage.jsx"],"sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport api from '../api';\r\nimport Navbar from \"../utils/Navbar\";\r\nimport axios from \"axios\";\r\nexport default function ResetPasswordPage() {\r\n    const [code, setCode] = useState('');\r\n    const [error, setError] = useState('');\r\n    const [successMsg, setSuccessMsg] = useState('');\r\n    const [form, setForm] = useState({\r\n        email: '',\r\n        password: '',\r\n        confirmPassword: '',\r\n        firstName: '',\r\n        lastName: '',\r\n        phone: '',\r\n    });\r\n    useEffect(() => {\r\n        const stored = sessionStorage.getItem(\"signupForm\");\r\n        if (stored) {\r\n            const formData = JSON.parse(stored);\r\n            setForm(formData)\r\n            sessionStorage.removeItem(\"signupForm\")\r\n        }\r\n    }, []);\r\n\r\n\r\n        const handleVerifyCode = async (e) => {\r\n            e.preventDefault();\r\n            if (!code) return setError('–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥');\r\n            try {\r\n                await axios.post('http://localhost:8080/password/verify-code', {email: form.email, code});\r\n                setError('');\r\n                setSuccessMsg('–ü–æ—á—Ç–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞');\r\n                const response = await api.post('/oauth/sign-up', form);\r\n\r\n                const accessToken = response.data.accessToken;\r\n                sessionStorage.setItem('accessToken', accessToken);\r\n\r\n                setTimeout(() => window.location.href = '/', 2000);\r\n            } catch (err) {\r\n                setError('–ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥.');\r\n            }\r\n        };\r\n\r\n\r\n\r\n\r\n        return (\r\n\r\n            <>\r\n\r\n\r\n                <div className=\"container mt-5\" style={{maxWidth: 400}}>\r\n                    <div className=\"bg-white p-4 rounded shadow\">\r\n                        <h4 className=\"text-center mb-3\">üîê –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ—á—Ç—ã</h4>\r\n\r\n                        <div className=\"d-flex justify-content-between mb-3\">\r\n                            <span className={'fw-bold text-primary'}>–ù–∞ –≤–∞—à—É –ø–æ—á—Ç—É –±—ã–ª –≤—ã—Å–ª–∞–Ω –∫–æ–¥</span>\r\n                        </div>\r\n\r\n                        {error && <div className=\"alert alert-danger py-1\">{error}</div>}\r\n                        {successMsg && <div className=\"alert alert-success py-1\">{successMsg}</div>}\r\n\r\n\r\n                        {(\r\n                            <form onSubmit={handleVerifyCode}>\r\n                                <div className=\"mb-3\">\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        className=\"form-control\"\r\n                                        placeholder=\"–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∏–∑ –ø–∏—Å—å–º–∞\"\r\n                                        value={code}\r\n                                        onChange={(e) => setCode(e.target.value)}\r\n                                        required\r\n                                    />\r\n                                </div>\r\n                                <button className=\"btn btn-primary w-100\" type=\"submit\">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∫–æ–¥</button>\r\n                            </form>\r\n                        )}\r\n\r\n                    </div>\r\n                </div>\r\n            </>\r\n        );\r\n    }\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}