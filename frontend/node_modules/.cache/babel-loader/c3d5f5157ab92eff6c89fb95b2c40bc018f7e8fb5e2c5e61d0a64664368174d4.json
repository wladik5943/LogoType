{"ast":null,"code":"import _objectSpread from\"D:/progects/SoftArex/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import api from\"../api\";import'bootstrap/dist/css/bootstrap.min.css';import'bootstrap/dist/js/bootstrap.bundle.min.js';import{getUser}from'../utils/auth';import AppNavbar from\"../utils/AppNavbar\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function EditProfile(){const[form,setForm]=useState({firstName:'',lastName:'',email:'',phone:''});const[error,setError]=useState('');const[successMsg,setSuccessMsg]=useState('');useEffect(()=>{const saveUser=getUser();setForm(saveUser);},[]);const handleChange=e=>{setForm(_objectSpread(_objectSpread({},form),{},{[e.target.name]:e.target.value}));};const handleSubmit=async e=>{e.preventDefault();try{const res=await api.post('/user/edit-profile',form);setSuccessMsg(\"изменения сохранены\");setForm(res.data);sessionStorage.setItem(\"user\",JSON.stringify(res.data));setTimeout(()=>setSuccessMsg(''),2000);}catch(error){var _error$response,_error$response$data;const errMsg=(error===null||error===void 0?void 0:(_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Ошибка авторизации';setError(errMsg);}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-box bg-white p-4 rounded border mt-5\",style:{maxWidth:'500px',margin:'80px auto'},children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mb-4\",children:\"Edit Profile\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger py-1\",children:error}),successMsg&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-success py-1\",children:successMsg}),/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"First Name\"}),/*#__PURE__*/_jsx(\"input\",{name:\"firstName\",type:\"text\",className:\"form-control\",value:form.firstName,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Last Name\"}),/*#__PURE__*/_jsx(\"input\",{name:\"lastName\",type:\"text\",className:\"form-control\",value:form.lastName,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"form-label\",children:[\"Email \",/*#__PURE__*/_jsx(\"span\",{className:\"text-danger\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{name:\"email\",type:\"email\",className:\"form-control\",value:form.email,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Phone Number\"}),/*#__PURE__*/_jsx(\"input\",{name:\"phone\",type:\"tel\",className:\"form-control\",value:form.phone,onChange:handleChange})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary w-100\",children:\"SAVE\"})]})]})})});}","map":{"version":3,"names":["React","useState","useEffect","api","getUser","AppNavbar","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","EditProfile","form","setForm","firstName","lastName","email","phone","error","setError","successMsg","setSuccessMsg","saveUser","handleChange","e","_objectSpread","target","name","value","handleSubmit","preventDefault","res","post","data","sessionStorage","setItem","JSON","stringify","setTimeout","_error$response","_error$response$data","errMsg","response","message","children","className","style","maxWidth","margin","onSubmit","type","onChange","required"],"sources":["D:/progects/SoftArex/frontend/src/pages/EditProfile.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport api from \"../api\";\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport 'bootstrap/dist/js/bootstrap.bundle.min.js';\r\nimport {getUser} from '../utils/auth';\r\nimport AppNavbar from \"../utils/AppNavbar\";\r\n\r\nexport default function EditProfile() {\r\n\r\n    const [form, setForm] = useState({\r\n        firstName: '',\r\n        lastName: '',\r\n        email: '',\r\n        phone: ''\r\n    });\r\n\r\n\r\n    const [error, setError] = useState('');\r\n    const [successMsg, setSuccessMsg] = useState('');\r\n\r\n\r\n\r\n    useEffect(() => {\r\n\r\n\r\n\r\n            const saveUser = getUser();\r\n            setForm(saveUser)\r\n    }, []);\r\n\r\n    const handleChange = e => {\r\n        setForm({ ...form, [e.target.name]: e.target.value });\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n\r\n            const res =  await api.post('/user/edit-profile', form)\r\n\r\n                    setSuccessMsg(\"изменения сохранены\")\r\n                    setForm(res.data)\r\n            sessionStorage.setItem(\"user\", JSON.stringify(res.data));\r\n\r\n\r\n            setTimeout(() => setSuccessMsg(''), 2000);\r\n\r\n        } catch (error) {\r\n            const errMsg = error?.response?.data?.message || 'Ошибка авторизации';\r\n            setError(errMsg);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n\r\n\r\n            <div className=\"container\">\r\n                <div className=\"form-box bg-white p-4 rounded border mt-5\" style={{ maxWidth: '500px', margin: '80px auto' }}>\r\n                    <h5 className=\"mb-4\">Edit Profile</h5>\r\n                    <form onSubmit={handleSubmit}>\r\n                        <div className=\"mb-3\">\r\n                            {error && <div className=\"alert alert-danger py-1\">{error}</div>}\r\n                            {successMsg && <div className=\"alert alert-success py-1\">{successMsg}</div>}\r\n                            <label className=\"form-label\">First Name</label>\r\n                            <input\r\n                                name=\"firstName\"\r\n                                type=\"text\"\r\n                                className=\"form-control\"\r\n                                value={form.firstName}\r\n                                onChange={handleChange}\r\n                            />\r\n                        </div>\r\n                        <div className=\"mb-3\">\r\n                            <label className=\"form-label\">Last Name</label>\r\n                            <input\r\n                                name=\"lastName\"\r\n                                type=\"text\"\r\n                                className=\"form-control\"\r\n                                value={form.lastName}\r\n                                onChange={handleChange}\r\n                            />\r\n                        </div>\r\n                        <div className=\"mb-3\">\r\n                            <label className=\"form-label\">\r\n                                Email <span className=\"text-danger\">*</span>\r\n                            </label>\r\n                            <input\r\n                                name=\"email\"\r\n                                type=\"email\"\r\n                                className=\"form-control\"\r\n                                value={form.email}\r\n                                onChange={handleChange}\r\n                                required\r\n                            />\r\n                        </div>\r\n                        <div className=\"mb-3\">\r\n                            <label className=\"form-label\">Phone Number</label>\r\n                            <input\r\n                                name=\"phone\"\r\n                                type=\"tel\"\r\n                                className=\"form-control\"\r\n                                value={form.phone}\r\n                                onChange={handleChange}\r\n                            />\r\n                        </div>\r\n                        <button type=\"submit\" className=\"btn btn-primary w-100\">\r\n                            SAVE\r\n                        </button>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}